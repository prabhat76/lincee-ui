<div class="admin-page">
  <div class="container">
    <!-- Header -->
    <div class="admin-header">
      <h1>Admin Console</h1>
      <p>Manage products and update orders.</p>
    </div>

    <!-- Error Alert -->
    <div class="error-alert" *ngIf="error()">
      <span>{{ error() }}</span>
      <button (click)="error.set(null)" class="close-btn">âœ•</button>
    </div>

    <!-- Shop Items Section -->
    <section class="admin-section">
      <div class="section-header">
        <h2>Shop Items</h2>
      </div>

      <div class="table" *ngIf="!loadingShopItems()">
        <div class="table-header">
          <span>ID</span>
          <span>Name</span>
          <span>Price</span>
          <span>Category</span>
          <span>Stock Status</span>
        </div>
        <div class="table-row" *ngFor="let item of shopItems()">
          <span>#{{ item.id }}</span>
          <span>{{ item.name }}</span>
          <span>{{ item.price | currency }}</span>
          <span>{{ item.category }}</span>
          <span class="stock-status">In Stock</span>
        </div>
        <div class="empty-state" *ngIf="shopItems().length === 0">
          <p>No items in shop. Add products to see them here.</p>
        </div>
      </div>
      <div class="loading" *ngIf="loadingShopItems()">Loading shop items...</div>
    </section>

    <!-- Products Section -->
    <section class="admin-section">
      <div class="section-header">
        <h2>Product Management</h2>
      </div>

      <!-- Excel Import Toggle -->
      <div class="excel-import-toggle">
        <button 
          type="button" 
          class="btn btn-secondary"
          (click)="toggleExcelImport()"
        >
          {{ showExcelImport() ? 'ðŸ“Š Hide Bulk Import' : 'ðŸ“Š Show Bulk Import' }}
        </button>
      </div>

      <!-- Excel Import Component -->
      <app-excel-import 
        *ngIf="showExcelImport()"
        (productImported)="onProductImported($event)"
      >
      </app-excel-import>

      <!-- Product Form Component -->
      <app-product-form 
        [editingProduct]="editingProduct()"
        (productSubmitted)="onProductSubmitted($event)"
        (formReset)="onFormReset()"
      >
      </app-product-form>

      <!-- Product List Component -->
      <app-product-list 
        [products]="products()"
        [isLoading]="loadingProducts()"
        (editProduct)="onEditProduct($event)"
        (productDeleted)="onProductDeleted($event)"
      >
      </app-product-list>
    </section>

    <!-- Orders Section -->
    <app-orders-section
      [orders]="orders()"
      [isLoading]="loadingOrders()"
    >
    </app-orders-section>
  </div>
</div>
