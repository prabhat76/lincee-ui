<div class="cart-page">
  <div class="container">
    <h1 class="page-title">SHOPPING CART</h1>

    <div class="cart-empty" *ngIf="cart().items.length === 0">
      <p>Your cart is currently empty.</p>
      <a routerLink="/" class="btn btn-primary">CONTINUE SHOPPING</a>
    </div>

    <div class="cart-content" *ngIf="cart().items.length > 0">
      <div class="cart-items">
        <div class="cart-header">
          <span>PRODUCT</span>
          <span>QUANTITY</span>
          <span>TOTAL</span>
        </div>

        <div class="cart-item" *ngFor="let item of cart().items">
          <div class="item-info">
            <div class="item-image">
               <!-- Product Image with fallback -->
               <img [src]="item.image || 'assets/image.png'" [alt]="item.productName" (error)="handleImageError($event)"> 
            </div>
            <div class="item-details">
              <h3>{{ item.productName }}</h3>
              <p class="price">{{ item.price | currency }}</p>
              <button class="btn-text" (click)="removeItem(item.productId)">REMOVE</button>
            </div>
          </div>
          
          <div class="item-quantity">
            <div class="quantity-controls">
                <button class="btn-qty" (click)="updateQuantity(item.productId, -1)">âˆ’</button>
                <span class="qty-display">{{ item.quantity }}</span>
                <button class="btn-qty" (click)="updateQuantity(item.productId, 1)">+</button>
            </div>
          </div>

          <div class="item-total">
            {{ ((item.price || 0) * item.quantity) | currency }}
          </div>
        </div>
      </div>

      <div class="cart-summary">
        <div class="summary-row">
          <span>SUBTOTAL</span>
          <span>{{ cart().total | currency }}</span>
        </div>
        <div class="summary-note">Taxes and shipping calculated at checkout</div>
        <button class="btn btn-primary" routerLink="/checkout">CHECKOUT</button>
      </div>
    </div>
  </div>
</div>
